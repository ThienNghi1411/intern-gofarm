<link rel="stylesheet" href="{{ 'filter.css' | asset_url }}">

<form class="filter-form container" id="myForm">
    {%- for filter in collection.filters -%}

      <details class="filter-group" open>
        <summary class="filter-group-summary">
          <div>
            <h4>{{ filter.label }}</h4>
            
           
          </div>
        </summary>
  
        <div class="filter-group-display">
          
  
          {%- case filter.type -%}
          {%- when 'price_range' -%}
          <div class="filter-group-display__price-range">
            <div class="noUiSlider"></div>
            <div class="filter-group-display__price-range-from">
              <span>{{ cart.currency.symbol }}</span>
              
              <input name="{{ filter.min_value.param_name }}"
                id="Filter-{{ filter.min_value.param_name }}"
                {% if filter.min_value.value -%}
                  value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                {%- endif %}
                type="number"
                placeholder="0"
                min="0"
                max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                onchange="this.form.submit()"
              >

            
            </div>
            <div class="filter-group-display__price-range-to">
              <span>{{ cart.currency.symbol }}</span>

              <input name="{{ filter.max_value.param_name }}"
                id="Filter-{{ filter.max_value.param_name }}"
                {% if filter.max_value.value -%}
                  value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                {%- endif %}
                type="number"
                placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                min="0"
                max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                onchange="this.form.submit()"
              >

            </div>
          </div>
            {%- when 'boolean' or 'list' -%}
              <ul class="filter-group-display__list">
                {%- for filter_value in filter.values -%}
                  <li class="filter-group-display__list-item">
                    <label for="Filter-{{ filter.param_name }}-{{ forloop.index }}" class="checkbox_container">
                    <input type="checkbox"
                      name="{{ filter_value.param_name }}"
                      value="{{ filter_value.value }}"
                      id="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                      onchange="this.form.submit()"
                      {% if filter_value.active -%}checked{%- endif %}
                      {% if filter_value.count == 0 and filter_value.active == false -%}disabled{%- endif %}
                    >
                    <span class="checkmark"></span>
                   
                    <div class="checkbox_tittle">  {{ filter_value.label }}</div>
                  </label>
                  </li>
                {%- endfor -%}
              </ul>
  
  
           
  
            
          {%- endcase -%}
        </div>
      </details>
    {%- endfor -%}
  
    <!-- <div class="active-filters">
      <a href="{{ collection.url }}?sort_by={{ collection.sort_by }}" class="active-filters__clear">Clear all</a>
  
      {%- for filter in collection.filters -%}
        {%- if filter.type == "price_range" -%}
          {%- if filter.min_value.value != nil or filter.max_value.value != nil -%}
            <a class="active-filters__remove-filter" href="{{ filter.url_to_remove }}">
              {%- assign min_value = filter.min_value.value | default: 0 -%}
              {%- assign max_value = filter.max_value.value | default: filter.range_max -%}
              {{ min_value | money }} - {{ max_value | money }} X
            </a>
          {%- endif -%}
        {%- else -%}
          {%- for filter_value in filter.active_values -%}
            <a class="active-filters__remove-filter" href="{{ filter_value.url_to_remove }}">
              {{ filter.label }}: {{ filter_value.label }} X
            </a>
          {%- endfor -%}
        {%- endif- %}
      {%- endfor -%}
    </div> -->
  </form>

  <script src="{{ 'filter.js' | asset_url }}" defer></script>
  <link href="nouislider.css" rel="stylesheet">
<script src="nouislider.js"></script>

<script type="module">
import noUiSlider from 'nouislider/dist/nouislider.mjs';
</script>
  
